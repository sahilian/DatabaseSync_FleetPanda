@model DatabaseSync.ViewModels.DataSyncVM

<div class="container mt-5">
    <h1 class="text-center mb-4">Data Synchronization</h1>

    <form asp-action="SyncData" method="post" class="mb-4">
        <div class="form-group">
            <label for="syncInterval">Sync Interval (in seconds):</label>
            <input type="number" id="syncInterval" name="syncInterval" value="@Model.SyncInterval" class="form-control" required />
        </div>
        <button type="submit" class="btn btn-primary">Fetch Data Manually</button>
    </form>

    <!-- Create Customer Button -->
    <div class="mb-3">
        <a asp-action="Create" class="btn btn-success">Create Customer</a>
    </div>

    <h2 class="mb-3">Fetched Customers</h2>
    @if (Model.Customers != null && Model.Customers.Count > 0)
    {
        <table class="table table-striped">
            <thead class="thead-dark">
                <tr>
                    <th>Customer ID</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Locations</th>
                    <th>Actions</th> <!-- Added column for actions -->
                </tr>
            </thead>
            <tbody>
                @foreach (var customer in Model.Customers)
                {
                    <tr>
                        <td>@customer.CustomerID</td>
                        <td>@customer.Name</td>
                        <td>@customer.Email</td>
                        <td>@customer.Phone</td>
                        <td>
                            <ul class="list-unstyled">
                                @foreach (var location in customer.Locations)
                                {
                                    <li>@location.Address</li>
                                }
                            </ul>
                        </td>
                        <td>
                            <a asp-action="Edit" asp-route-id="@customer.CustomerID" class="btn btn-warning btn-sm">Edit</a>
                            <form asp-action="Delete" asp-route-id="@customer.CustomerID" method="post" style="display:inline;">
                                <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this customer?');">Delete</button>
                            </form>
                        </td> <!-- Added action buttons -->
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <p class="text-muted">No customers found.</p>
    }
</div>
